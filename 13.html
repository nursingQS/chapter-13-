<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Nursing Flashcards - Chapter 13: Health Promotion of the Preschooler and Family</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            height: 96vh;
            background: #f8feff;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 150, 136, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 3px solid #4db6ac;
        }
        
        .header {
            background: linear-gradient(135deg, #00796b, #009688);
            color: white;
            padding: 12px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><circle cx="30" cy="30" r="8" fill="white"/><circle cx="70" cy="30" r="10" fill="white"/><circle cx="50" cy="70" r="12" fill="white"/><path d="M30,50 Q50,30 70,50" fill="white"/><rect x="40" y="40" width="20" height="20" rx="5" fill="white"/></svg>');
            background-size: 80px 80px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            position: relative;
            color: #b2dfdb;
            line-height: 1.2;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            color: #e0f2f1;
            margin-bottom: 8px;
        }
        
        .progress {
            background: #00695c;
            height: 6px;
            width: 100%;
            flex-shrink: 0;
            border-radius: 0 0 5px 5px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #4db6ac, #26a69a);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 0 5px 5px 0;
        }
        
        .section-nav {
            display: flex;
            gap: 6px;
            padding: 8px 10px;
            background: linear-gradient(135deg, #004d40, #00796b);
            border-bottom: 1px solid #4db6ac;
            flex-shrink: 0;
            overflow-x: auto;
            align-items: center;
            justify-content: center;
        }
        
        .section-btn {
            padding: 5px 10px;
            border: 2px solid #4db6ac;
            background: rgba(255, 255, 255, 0.95);
            color: #00796b;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 120px;
            text-align: center;
        }
        
        .section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(77, 182, 172, 0.4);
        }
        
        .section-btn.active {
            background: linear-gradient(135deg, #4db6ac, #26a69a);
            color: white;
            border-color: #00796b;
            box-shadow: 0 6px 12px rgba(77, 182, 172, 0.5);
        }
        
        .flashcard {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f8feff;
            overflow: hidden;
            min-height: 0;
        }
        
        .question-container {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            margin-bottom: 8px;
            background: white;
            padding: 12px;
            border-radius: 10px;
            border-left: 6px solid #4db6ac;
            box-shadow: 0 4px 8px rgba(0, 150, 136, 0.1);
            flex-shrink: 0;
        }
        
        .question-icon {
            background: linear-gradient(135deg, #00796b, #4db6ac);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(0, 121, 107, 0.4);
        }
        
        .question {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #004d40;
            flex-grow: 1;
            font-weight: 500;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .multiple-select-indicator {
            background: #d32f2f;
            color: white;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 6px;
            white-space: nowrap;
            box-shadow: 0 3px 6px rgba(211, 47, 47, 0.3);
            flex-shrink: 0;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 8px;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        
        .option {
            padding: 8px 10px;
            border: 2px solid #b2dfdb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.85rem;
            line-height: 1.3;
            flex-shrink: 0;
            min-height: 45px;
        }
        
        .option:hover {
            background: #e0f2f1;
            border-color: #4db6ac;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(77, 182, 172, 0.2);
        }
        
        .option-letter {
            background: #b2dfdb;
            color: #00796b;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            border: 2px solid #80cbc4;
        }
        
        /* CORRECT - ALWAYS GREEN */
        .option.correct {
            background: #c8e6c9;
            border-color: #388e3c;
            color: #1b5e20;
        }
        
        .option.correct .option-letter {
            background: #388e3c;
            color: white;
            border-color: #388e3c;
        }
        
        /* INCORRECT - ALWAYS RED */
        .option.incorrect {
            background: #ffcdd2;
            border-color: #d32f2f;
            color: #b71c1c;
        }
        
        .option.incorrect .option-letter {
            background: #d32f2f;
            color: white;
            border-color: #d32f2f;
        }
        
        .option.selected {
            background: #e0f2f1;
            border-color: #4db6ac;
            color: #00796b;
        }
        
        .option.selected .option-letter {
            background: #4db6ac;
            color: #004d40;
            border-color: #26a69a;
        }
        
        .feedback {
            padding: 8px 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: none;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            border: 3px solid #388e3c;
            color: #1b5e20;
            display: flex;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            border: 3px solid #d32f2f;
            color: #b71c1c;
            display: flex;
        }
        
        .feedback-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: #b2dfdb;
            border-top: 2px solid #80cbc4;
            flex-shrink: 0;
            gap: 8px;
        }
        
        .counter {
            font-weight: bold;
            color: #00796b;
            font-size: 0.9rem;
            background: white;
            padding: 5px 10px;
            border-radius: 20px;
            border: 2px solid #4db6ac;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #00796b, #4db6ac);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 121, 107, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #009688, #00796b);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 150, 136, 0.4);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffb300, #ff8f00);
            color: #212529;
        }
        
        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 179, 0, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #c62828, #b71c1c);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(198, 40, 40, 0.4);
        }
        
        .rationale {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 3px solid #ffb300;
            border-radius: 10px;
            padding: 10px;
            margin-top: 8px;
            display: none;
            box-shadow: 0 4px 12px rgba(255, 179, 0, 0.2);
            flex-shrink: 0;
            overflow: hidden;
            max-height: 120px;
        }
        
        .rationale.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .rationale h4 {
            color: #ff8f00;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .rationale p {
            color: #856404;
            line-height: 1.4;
            font-size: 0.8rem;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stats {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 4px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .cancel-selection {
            background: linear-gradient(135deg, #c62828, #b71c1c);
            color: white;
            margin: 0 auto 8px auto;
            display: none;
            box-shadow: 0 4px 10px rgba(198, 40, 40, 0.3);
            flex-shrink: 0;
        }
        
        .cancel-selection:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(198, 40, 40, 0.4);
        }
        
        .cancel-selection.show {
            display: flex;
        }
        
        .multiple-select-instructions {
            text-align: center;
            color: #c62828;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.8rem;
            background: #fff3cd;
            padding: 6px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            flex-shrink: 0;
        }
        
        .matching-container {
            background: linear-gradient(135deg, #f8feff, #e0f2f1);
            border-radius: 8px;
            padding: 10px;
            border: 2px solid #b2dfdb;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0;
        }
        
        .matching-question {
            font-size: 0.85rem;
            color: #004d40;
            font-weight: 500;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 8px;
            border: 2px solid #b2dfdb;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            max-height: 3em;
            flex-shrink: 0;
        }
        
        .matching-options {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 5px;
            overflow: hidden;
            padding: 2px;
            min-height: 0;
        }
        
        .matching-option {
            padding: 8px;
            border: 2px dashed #4db6ac;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: 500;
            color: #009688;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            overflow: hidden;
            line-height: 1.2;
        }
        
        .matching-option:hover {
            background: #e0f2f1;
            border-style: solid;
            border-color: #009688;
        }
        
        .matching-option.correct {
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            border-color: #388e3c;
            border-style: solid;
            color: #1b5e20;
        }
        
        .matching-option.incorrect {
            background: linear-gradient(135deg, #ffcdd2, #ef9a9a);
            border-color: #d32f2f;
            border-style: solid;
            color: #b71c1c;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        }
        
        /* Remove all scrollbars */
        .options,
        .matching-options,
        .rationale,
        .container,
        .flashcard,
        body {
            overflow: hidden !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }
        
        .options::-webkit-scrollbar,
        .matching-options::-webkit-scrollbar,
        .rationale::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        @media (max-width: 768px) {
            .container {
                height: 98vh;
            }
            
            .section-btn {
                min-width: 100px;
                font-size: 0.7rem;
                padding: 4px 8px;
            }
            
            .matching-options {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 10px 12px;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .navigation {
                padding: 8px 10px;
                flex-wrap: wrap;
                justify-content: center;
                gap: 6px;
            }
            
            .counter {
                order: -1;
                width: 100%;
                text-align: center;
                margin-bottom: 4px;
                font-size: 0.8rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .question {
                font-size: 0.85rem;
            }
            
            .option {
                font-size: 0.8rem;
                padding: 6px 8px;
                min-height: 40px;
            }
            
            .question-icon {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .option-letter {
                width: 22px;
                height: 22px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-height: 700px) {
            .container {
                height: 99vh;
            }
            
            .header {
                padding: 8px 10px;
            }
            
            .header h1 {
                font-size: 1.1rem;
            }
            
            .header .subtitle {
                font-size: 0.8rem;
            }
            
            .question-container {
                padding: 10px;
                margin-bottom: 6px;
            }
            
            .question {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .option {
                padding: 6px 8px;
                min-height: 35px;
                font-size: 0.75rem;
            }
            
            .navigation {
                padding: 6px 8px;
            }
            
            .rationale {
                max-height: 80px;
                padding: 8px;
            }
            
            .feedback {
                padding: 6px 8px;
                font-size: 0.75rem;
            }
            
            .option-letter {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .stats {
                display: none;
            }
        }
        
        @media (max-height: 600px) {
            .question-container {
                padding: 8px;
            }
            
            .question-icon {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .option {
                min-height: 30px;
                padding: 4px 6px;
                font-size: 0.7rem;
            }
            
            .option-letter {
                width: 18px;
                height: 18px;
                font-size: 0.65rem;
            }
            
            .btn {
                padding: 5px 8px;
                font-size: 0.7rem;
            }
            
            .rationale {
                max-height: 60px;
                padding: 6px;
            }
            
            .rationale p {
                font-size: 0.7rem;
                line-height: 1.3;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè´ Chapter 13: Health Promotion of the Preschooler and Family</h1>
            <div class="subtitle">Preschool Development Theme - Playful & Educational Environment</div>
            <div class="stats">
                <div class="stat">üìö 28 Questions</div>
                <div class="stat">üéØ Immediate Feedback</div>
                <div class="stat">‚úÖ Green/Red System</div>
                <div class="stat">üîÑ Multiple Question Types</div>
            </div>
        </div>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="section-nav">
            <button class="section-btn active" onclick="setSection('multiple-choice')">Multiple Choice (28)</button>
            <button class="section-btn" onclick="setSection('multiple-response')">Multiple Response (11)</button>
            <button class="section-btn" onclick="setSection('all')">All Mixed (39)</button>
        </div>
        
        <div class="flashcard">
            <div class="question-container">
                <div class="question-icon" id="questionNumber">1</div>
                <div class="question" id="question"></div>
                <div class="multiple-select-indicator" id="multipleSelectIndicator" style="display: none;">Multiple Answers</div>
            </div>
            
            <div class="multiple-select-instructions" id="multipleSelectInstructions" style="display: none;">
                üí° Select ALL correct answers
            </div>
            
            <div class="options" id="options"></div>
            
            <div class="matching-container" id="matchingContainer" style="display: none;">
                <div class="matching-question" id="matchingQuestion"></div>
                <div class="matching-options" id="matchingOptions"></div>
            </div>
            
            <button class="btn cancel-selection" id="cancelBtn" onclick="cancelSelection()">
                üîÑ Reset
            </button>
            
            <div class="feedback" id="feedback">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <div id="feedbackText"></div>
            </div>
            <div class="rationale" id="rationale">
                <h4>üí° Rationale:</h4>
                <p id="rationaleText"></p>
            </div>
        </div>
        
        <div class="navigation">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousCard()">
                ‚¨ÖÔ∏è Prev
            </button>
            <div class="counter" id="counter">1/28</div>
            <button class="btn btn-warning" id="submitBtn" onclick="submitAnswer()" style="display: none;">
                ‚úÖ Submit
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextCard()">
                Next ‚û°Ô∏è
            </button>
        </div>
    </div>

    <script>
        // Chapter 13 Data - Health Promotion of the Preschooler and Family
        const sections = {
            'multiple-choice': [
                {
                    question: "In terms of fine motor development, what should the 3-year-old child be expected to do?",
                    options: ["Tie shoelaces.", "Copy (draw) a circle.", "Use scissors or a pencil very well.", "Draw a person with seven to nine parts."],
                    correct: 1,
                    rationale: "Three-year-old children are able to accomplish the fine motor skill of copying (drawing) a circle. The ability to tie shoelaces, to use scissors or a pencil very well, and to draw a person with seven to nine parts are fine motor skills of 5-year-old children."
                },
                {
                    question: "According to Piaget, magical thinking is the belief of which?",
                    options: ["Thoughts are all powerful.", "God is an imaginary friend.", "Events have cause and effect.", "If the skin is broken, the insides will come out."],
                    correct: 0,
                    rationale: "Because of their egocentrism and transductive reasoning, preschoolers believe that thoughts are all powerful. Believing God is an imaginary friend is an example of concrete thinking in a preschooler's spiritual development."
                },
                {
                    question: "In terms of cognitive development, a 5-year-old child should be expected to do which?",
                    options: ["Think abstractly.", "Use magical thinking.", "Understand conservation of matter.", "Understand another person's perspective."],
                    correct: 1,
                    rationale: "Magical thinking is believing that thoughts can cause events. An example is thinking of the death of a parent might cause it to happen. Abstract thought does not develop until the school-age years."
                },
                {
                    question: "The nurse is caring for a hospitalized 4-year-old boy. His parents tell the nurse they will be back to visit at 6 PM. When he asks the nurse when his parents are coming, what would the nurse's best response be?",
                    options: ["They will be here soon.", "They will come after dinner.", "Let me show you on the clock when 6 PM is.", "I will tell you every time I see you how much longer it will be."],
                    correct: 1,
                    rationale: "A 4-year-old child understands time in relation to events such as meals. Children perceive 'soon' as a very short time. The nurse may lose the child's trust if his parents do not return in the time he perceives as 'soon'."
                },
                {
                    question: "A 4-year-old boy is hospitalized with a serious bacterial infection. He tells the nurse that he is sick because he was bad. What is the nurse's best interpretation of this comment?",
                    options: ["Sign of stress", "Common at this age", "Suggestive of maladaptation", "Suggestive of excessive discipline at home"],
                    correct: 1,
                    rationale: "Preschoolers cannot understand the cause and effect of illness. Their egocentrism makes them think they are directly responsible for events, making them feel guilt for things outside of their control."
                },
                {
                    question: "A 4-year-old child tells the nurse that she doesn't want another blood sample drawn because 'I need all of my insides and I don't want anyone taking them out.' What is the nurse's best interpretation of this?",
                    options: ["The child is being overly dramatic.", "The child has a disturbed body image.", "Preschoolers have poorly defined body boundaries.", "Preschoolers normally have a good understanding of their bodies."],
                    correct: 2,
                    rationale: "Preschoolers have little understanding of body boundaries, which leads to fears of mutilation. The child is not capable of being dramatic at this age. She truly has fear."
                },
                {
                    question: "Which type of play is most typical of the preschool period?",
                    options: ["Team", "Parallel", "Solitary", "Associative"],
                    correct: 3,
                    rationale: "Associative play is group play in similar or identical activities but without rigid organization or rules. School-age children play in teams. Parallel play is that of toddlers. Solitary play is that of infants."
                },
                {
                    question: "What characteristic best describes the language skills of a 3-year-old child?",
                    options: ["Asks meanings of words", "Follows directional commands", "Can describe an object according to its composition", "Talks incessantly regardless of whether anyone is listening"],
                    correct: 3,
                    rationale: "Because of the dramatic vocabulary increase at this age, 3-year-old children are known to talk incessantly regardless of whether anyone is listening."
                },
                {
                    question: "During a well-child visit, the father of a 4-year-old boy tells the nurse that he is not sure if his son is ready for kindergarten. The boy's birthday is close to the cut-off date, and he has not attended preschool. What is the nurse's best recommendation?",
                    options: ["Start kindergarten.", "Talk to other parents about readiness.", "Perform a developmental screening.", "Postpone kindergarten and go to preschool."],
                    correct: 2,
                    rationale: "A developmental assessment with a screening tool that addresses cognitive, social, and physical milestones can help identify children who may need further assessment."
                },
                {
                    question: "Parents tell the nurse they found their 3-year-old daughter and a male cousin of the same age inspecting each other closely as they used the bathroom. What is the most appropriate recommendation for the nurse to make?",
                    options: ["Punish the children so this behavior stops.", "Neither condone nor condemn the curiosity.", "Get counseling for this unusual and dangerous behavior.", "Allow the children unrestricted permission to satisfy this curiosity."],
                    correct: 1,
                    rationale: "Three-year-old children become aware of anatomic differences and are concerned about how the other sex works. Such exploration should not be condoned or condemned."
                },
                {
                    question: "A boy age 4 1/2 years has been having increasingly frequent angry outbursts in preschool. He is aggressive toward the other children and the teachers. This behavior has been a problem for approximately 8 to 10 weeks. His parent asks the nurse for advice. What is the most appropriate intervention?",
                    options: ["Refer the child for a professional psychosocial assessment.", "Explain that this is normal in preschoolers, especially boys.", "Encourage the parent to try more consistent and firm discipline.", "Talk to the preschool teacher to obtain validation for behavior parent reports."],
                    correct: 0,
                    rationale: "The preschool years are a time when children learn socially acceptable behavior. The difference between normal and problematic behavior is not the behavior but the severity, frequency, and duration."
                },
                {
                    question: "What dysfunctional speech pattern is a normal characteristic of the language development of a preschool child?",
                    options: ["Lisp", "Echolalia", "Stammering", "Repetition without meaning"],
                    correct: 2,
                    rationale: "Stammering and stuttering are normal dysfluency in preschool-age children. Lisps are not a normal characteristic of language development."
                },
                {
                    question: "The parent of a 4-year-old boy tells the nurse that the child believes monsters and bogeymen are in his bedroom at night. What is the nurse's best suggestion for coping with this problem?",
                    options: ["Let the child sleep with his parents.", "Keep a night light on in the child's bedroom.", "Help the child understand that these fears are illogical.", "Tell the child that monsters and bogeymen do not exist."],
                    correct: 1,
                    rationale: "Involve the child in problem solving. A night light shows a child that imaginary creatures do not lurk in the darkness."
                },
                {
                    question: "What is descriptive of the nutritional requirements of preschool children?",
                    options: ["The quality of the food consumed is more important than the quantity.", "The average daily intake of preschoolers should be about 3000 calories.", "Nutritional requirements for preschoolers are very different from requirements for toddlers.", "Requirements for calories per unit of body weight increase slightly during the preschool period."],
                    correct: 0,
                    rationale: "Parents need to be reassured that the quality of food eaten is more important than the quantity. Children are able to self-regulate their intake when offered foods high in nutritional value."
                },
                {
                    question: "A child age 4 1/2 years sometimes wakes her parents up at night screaming, thrashing, sweating, and apparently frightened, yet she is not aware of her parents' presence when they check on her. She lies down and sleeps without any parental intervention. This is most likely what?",
                    options: ["Nightmare", "Sleep terror", "Sleep apnea", "Seizure activity"],
                    correct: 1,
                    rationale: "This is a description of a sleep terror. The child is observed during the episode and not disturbed unless there is a possibility of injury."
                },
                {
                    question: "During the preschool period, the emphasis of injury prevention should be placed on what?",
                    options: ["Limitation of physical activities", "Punishment for unsafe behaviors", "Constant vigilance and protection", "Teaching about safety and potential hazards"],
                    correct: 3,
                    rationale: "Education about safety and potential hazards is appropriate for preschoolers because they can begin to understand dangers."
                },
                {
                    question: "The nurse is talking to the parent of a 5-year-old child who refuses to go to sleep at night. What intervention should the nurse suggest in helping the parent to cope with this sleep disturbance?",
                    options: ["Establish a consistent punishment if the child does not go to bed when told.", "Allow the child to fall asleep in a different room and then gently move the child to his or her bed.", "Establish limited rituals that signal readiness for bedtime.", "Allow the child to watch television until almost asleep."],
                    correct: 2,
                    rationale: "An appropriate intervention for a child who resists going to bed is to establish limited rituals such as a bath or story that signal readiness for bed and consistently follow through with the ritual."
                },
                {
                    question: "At a seminar for parents with preschool-age children, the nurse has discussed anticipatory tasks during the preschool years. Which statement by a parent should indicate a correct understanding of the teaching?",
                    options: [
                        "I should be worried if my 4-year-old child has an increase in sexual curiosity because this is a sign of sexual abuse.",
                        "I should expect my 5-year-old to change from a tranquil child to an aggressive child when school starts.",
                        "I should be concerned if my 4-year-old child starts telling exaggerated stories and has an imaginary playmate, since these could be signs of stress.",
                        "I should expect my 3-year-old child to have a more stable appetite and an increase in food selections."
                    ],
                    correct: 3,
                    rationale: "A 3-year-old child exhibits a more stable appetite than during the toddler years and is more willing to try different foods."
                },
                {
                    question: "The nurse is explaining average weight gain during the preschool years to a group of parents. Which average weight gain should the nurse suggest to the parents?",
                    options: ["1 to 2 kg", "2 to 3 kg", "3 to 4 kg", "4 to 5 kg"],
                    correct: 1,
                    rationale: "The average weight gain remains approximately 2 to 3 kg (4.5‚Äì6.5 lb) per year during the preschool period."
                },
                {
                    question: "The nurse is planning to bring a preschool child a toy from the playroom. What toy is appropriate for this age group?",
                    options: ["Building blocks", "A 500-piece puzzle", "Paint by number picture", "Farm animals and equipment"],
                    correct: 3,
                    rationale: "The most characteristic and pervasive preschooler activity is imitative, imaginative, and dramatic play. Farm animals and equipment would provide hours of self-expression."
                },
                {
                    question: "The nurse is conducting an assessment of fine motor development in a 3-year-old child. Which is the expected drawing skill for this age?",
                    options: ["Can draw a complete stick figure", "Holds the instrument with the fist", "Can copy a triangle and diamond", "Can copy a circle and imitate a cross"],
                    correct: 3,
                    rationale: "A 3-year-old child copies a circle and imitates a cross and vertical and horizontal lines. He or she holds the writing instrument with the fingers rather than the fist."
                },
                {
                    question: "What signals the resolution of the Oedipus or Electra complex?",
                    options: ["Learns sex differences", "Learns sexually appropriate behavior", "Identifies with the same-sex parent", "Has guilt over feelings toward the father or mother"],
                    correct: 2,
                    rationale: "The resolution of the Oedipus or Electra complex is identification with the same-sex parent."
                },
                {
                    question: "The nurse is explaining the preconventional stage of moral development to a group of nursing students. What characterizes this stage?",
                    options: ["Children in this stage focus on following the rules.", "Children in this stage live up to social expectations and roles.", "Children in this stage have a concrete sense of justice and fairness.", "Children in this stage have little, if any, concern for why something is wrong."],
                    correct: 3,
                    rationale: "Young children's development of moral judgment is at the most basic level in the preconventional stage. They have little, if any, concern for why something is wrong."
                },
                {
                    question: "The nurse is teaching parents about instilling a positive body image for the preschool age. What statement made by the parents indicates the teaching is understood?",
                    options: ["We will make sure our child is praised about his or her looks.", "We will help our child compare his or her size with other children.", "We understand our child will have well-defined body boundaries.", "We will be sure our child understands about being little for his or her age."],
                    correct: 0,
                    rationale: "Because these are formative years for both boys and girls, parents should make efforts to instill positive principles regarding body image."
                },
                {
                    question: "The nurse has just given a subcutaneous injection to a preschool child, and the child asks for a Band-Aid over the site. Which action should the nurse implement?",
                    options: ["Place a Band-Aid over the site.", "Massage the injection site with an alcohol swab.", "Show the child there is no bleeding from the site.", "Explain that a Band-Aid is not needed after a subcutaneous injection."],
                    correct: 0,
                    rationale: "Preschoolers have poorly defined body boundaries and fear that all their blood and insides can leak out if the skin is broken. Therefore, preschoolers may believe it is critical to use bandages after an injury."
                },
                {
                    question: "Parents of a preschool child tell the nurse, 'Our child seems to have many imaginary fears.' What suggestion should the nurse give to the parents to help their child resolve the fears?",
                    options: ["Ignore the fears; they will go away.", "Explain to your child the fears are not real.", "Give your child some new toys to allay the fears.", "Help your child to resolve the fears through play activities."],
                    correct: 3,
                    rationale: "Preschoolers are able to work through many of their unresolved fears, fantasies, and anxieties through play, especially if guided with appropriate play objects."
                },
                {
                    question: "A parent taking a preschool child to school on the first day asks the nurse, 'What do I do if my child wants me to stay?' What is an appropriate response by the nurse?",
                    options: ["It is better if you do not stay.", "It is best to stay and participate in the activities.", "It is OK to stay part of the first day, but be inconspicuous.", "It would be better to have a good friend take your child to class the first day."],
                    correct: 2,
                    rationale: "On the first day of preschool, in some instances, it is helpful for parents to remain for at least part of the first day until the child is comfortable. If parents stay, they should be available to the child but inconspicuous."
                },
                {
                    question: "What should the nurse suggest to parents of preschoolers about sensitive questions regarding sex?",
                    options: ["Distract your child from the topic.", "Offer complete factual information.", "Dismiss the topic until the child is older.", "Find out what your child knows or thinks."],
                    correct: 3,
                    rationale: "Two rules govern answering sensitive questions about topics such as sex. The first is to find out what children know and think."
                }
            ],
            
            'multiple-response': [
                {
                    question: "What developmental achievements are demonstrated by a 4-year-old child? (Select all that apply.)",
                    options: [
                        "Cares for self totally",
                        "Throws a ball overhead",
                        "Has a vocabulary of 1500 words",
                        "Can skip and hop on alternate feet",
                        "Tends to be selfish and impatient",
                        "Commonly has an imaginary playmate"
                    ],
                    correct: [1, 2, 4, 5],
                    rationale: "Developmental achievements for a 4-year-old child include throwing a ball overhead, having a vocabulary of 1500 words, tending to be selfish and impatient, and perhaps having an imaginary playmate."
                },
                {
                    question: "Parents are worried that their preschool-aged child is showing hyperaggressive behavior. What are signs of hyperaggressive behavior? (Select all that apply.)",
                    options: [
                        "Disrespect",
                        "Noncompliance",
                        "Infrequent impulsivity",
                        "Occasional temper tantrums",
                        "Unprovoked physical attacks on other children"
                    ],
                    correct: [0, 1, 4],
                    rationale: "Hyperaggressive behavior in preschoolers is characterized by unprovoked physical attacks on other children and adults, destruction of others' property, frequent intense temper tantrums, extreme impulsivity, disrespect, and noncompliance."
                },
                {
                    question: "The nurse understands that traits of gifted children include what? (Select all that apply.)",
                    options: [
                        "Fair memory skills",
                        "Limited sense of humor",
                        "Perfectionism as a focus",
                        "Inquisitive; always asking questions",
                        "Displays intense feelings and emotion"
                    ],
                    correct: [2, 3, 4],
                    rationale: "Characteristics of gifted children include perfectionism as a focus; inquisitive, always asking questions; and displaying intense feelings and emotion. Memory skills are pronounced, and humor is exceptional."
                },
                {
                    question: "What are common causes of speech problems? (Select all that apply.)",
                    options: [
                        "Autism",
                        "Prematurity",
                        "Hearing loss",
                        "Developmental delay",
                        "Overstimulated environment"
                    ],
                    correct: [0, 2, 3],
                    rationale: "Common causes of speech problems are hearing loss, developmental delay, autism, lack of environmental stimulation, and physical conditions that impede normal speech production."
                },
                {
                    question: "What are sources of stress in preschoolers? (Select all that apply.)",
                    options: [
                        "Shares possessions",
                        "Damages or destroys objects",
                        "May fear dogs or other animals",
                        "Seems to be in perpetual motion",
                        "May stutter or stumble over words"
                    ],
                    correct: [1, 2, 3, 4],
                    rationale: "Sources of stress in preschoolers include damaging or destroying objects, fearing dogs or other animals, in perpetual motion, and may stutter or stumble over words."
                },
                {
                    question: "What is the reason pedestrian motor vehicle injuries increase in the preschool age? (Select all that apply.)",
                    options: [
                        "Riding tricycles",
                        "Running after balls",
                        "Playing in the street",
                        "Crossing streets at the crosswalk",
                        "Crossing streets with an adult"
                    ],
                    correct: [0, 1, 2],
                    rationale: "Pedestrian motor vehicle injuries increase because of activities such as playing in the street, riding tricycles, running after balls, and forgetting safety regulations when crossing streets."
                },
                {
                    question: "Parents ask the nurse, 'Should we be concerned our preschooler has an imaginary friend, and how should we react?' Which responses should the nurse give to the parents? (Select all that apply.)",
                    options: [
                        "The imaginary playmate is a sign of health.",
                        "You can acknowledge the presence of the imaginary companion.",
                        "It is normal for a preschool-aged child to have an imaginary friend.",
                        "If your child wants a place setting at the table for the child, it is best to refuse.",
                        "It is OK to allow the child to blame the imaginary playmate to avoid punishment."
                    ],
                    correct: [0, 1, 2],
                    rationale: "Parents should be reassured that the child's fantasy is a sign of health that helps differentiate between make-believe and reality."
                },
                {
                    question: "The nurse is teaching parents of a 3-year-old child about gross motor developmental milestones. What milestones should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Rides a tricycle",
                        "Catches a ball reliably",
                        "Jumps off the bottom step",
                        "Stands on one foot for a few seconds",
                        "Walks downstairs using alternate footing"
                    ],
                    correct: [0, 2, 3],
                    rationale: "The gross motor milestones of a 3-year-old child include riding a tricycle, jumping off the bottom step, and standing on one foot for a few seconds."
                },
                {
                    question: "The nurse is teaching parents of a 4-year-old child about fine motor developmental milestones. What milestones should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Can lace shoes",
                        "Uses scissors successfully",
                        "Builds a tower of nine or 10 cubes",
                        "Builds a bridge with three cubes",
                        "Adeptly places small pellets in a narrow-necked bottle"
                    ],
                    correct: [2, 3, 4],
                    rationale: "The fine motor milestones of a 4-year-old child include building a tower of nine or 10 cubes, building a bridge with three cubes, and adeptly placing small pellets in a narrow-necked bottle."
                },
                {
                    question: "The nurse is teaching parents of a 3-year-old child about language developmental milestones. What milestones should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Asks many questions",
                        "Names one or more colors",
                        "Repeats sentence of six syllables",
                        "Uses primarily telegraphic speech",
                        "Has a vocabulary of 1500 words or more"
                    ],
                    correct: [0, 2, 3],
                    rationale: "The language milestones of a 3-year-old child include asking many questions, repeating a sentence of six syllables, and using primarily telegraphic speech."
                },
                {
                    question: "The nurse is teaching parents of a 4-year-old child about socialization developmental milestones. What milestones should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Very independent",
                        "Has mood swings",
                        "Has better manners",
                        "Eager to do things right",
                        "Tends to be selfish and impatient"
                    ],
                    correct: [0, 1, 4],
                    rationale: "The socialization milestones of a 4-year-old child include being very independent, having moods swings, and tending to be selfish and impatient."
                }
            ],
            
            'all': []
        };

        // Combine all questions for the 'all' section
        sections['all'] = [
            ...sections['multiple-choice'].map(q => ({...q, section: 'multiple-choice'})),
            ...sections['multiple-response'].map(q => ({...q, section: 'multiple-response'}))
        ];

        let currentSection = 'multiple-choice';
        let currentQuestion = 0;
        let selectedOption = null;
        let selectedOptions = [];
        let isSubmitted = false;
        let answers = {
            'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
            'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
            'all': Array(sections['all'].length).fill(null)
        };

        function setSection(section) {
            currentSection = section;
            currentQuestion = 0;
            selectedOption = null;
            selectedOptions = [];
            isSubmitted = false;
            
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function isMultipleResponseQuestion() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.section === 'multiple-response' || Array.isArray(questionData?.correct);
            }
            return currentSection === 'multiple-response';
        }

        function getCurrentQuestionData() {
            if (currentSection === 'all') {
                return sections['all'][currentQuestion] || null;
            } else {
                return sections[currentSection][currentQuestion];
            }
        }

        function loadQuestion() {
            const questionData = getCurrentQuestionData();
            
            if (!questionData) return;
            
            const isMultipleResponse = isMultipleResponseQuestion();
            
            // Update UI elements visibility
            document.getElementById('matchingContainer').style.display = 'none';
            document.getElementById('options').style.display = 'flex';
            document.getElementById('multipleSelectIndicator').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('multipleSelectInstructions').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('cancelBtn').classList.remove('show');
            document.getElementById('submitBtn').style.display = isMultipleResponse ? 'flex' : 'none';
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            
            let totalQuestions = getTotalQuestions();
            
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('counter').textContent = `${currentQuestion + 1}/${totalQuestions}`;
            
            document.getElementById('question').textContent = questionData.question;
            loadOptions(questionData);
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('rationale').classList.remove('show');
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            const isLastQuestion = currentQuestion >= totalQuestions - 1;
            document.getElementById('nextBtn').textContent = isLastQuestion ? 'Finish ‚û°Ô∏è' : 'Next ‚û°Ô∏è';
            document.getElementById('nextBtn').disabled = true;
            
            // Load saved answer state
            const storedAnswer = answers[currentSection][currentQuestion];
            if (storedAnswer !== null && storedAnswer !== undefined) {
                if (isMultipleResponse) {
                    selectedOptions = storedAnswer.selected || [];
                    isSubmitted = storedAnswer.submitted || false;
                    
                    if (isSubmitted) {
                        showFeedbackForMultipleResponse(questionData);
                        document.getElementById('nextBtn').disabled = false;
                        document.getElementById('submitBtn').disabled = true;
                    } else {
                        highlightSelectedOptionsForMultipleResponse();
                        document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
                        document.getElementById('nextBtn').disabled = false;
                        if (selectedOptions.length > 0) {
                            document.getElementById('cancelBtn').classList.add('show');
                        }
                    }
                } else {
                    // For single answer questions
                    selectedOption = storedAnswer;
                    highlightSelectedOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                }
            } else {
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                if (isMultipleResponse) {
                    document.getElementById('submitBtn').disabled = true;
                }
            }
        }

        function loadOptions(questionData) {
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            if (questionData.options && questionData.options.length > 0) {
                questionData.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option}</div>
                    `;
                    optionElement.onclick = () => selectOption(index, questionData);
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                // Fallback if no options are provided
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">A</div>
                    <div class="option-text">No options available for this question</div>
                `;
                optionsContainer.appendChild(optionElement);
            }
        }

        function selectOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                handleMultipleResponseSelect(index, questionData);
            } else {
                handleSingleSelect(index, questionData);
            }
        }

        function handleSingleSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            highlightSelectedOption(index, questionData);
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function handleMultipleResponseSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            if (isSubmitted) return;
            
            const optionIndex = selectedOptions.indexOf(index);
            if (optionIndex === -1) {
                selectedOptions.push(index);
            } else {
                selectedOptions.splice(optionIndex, 1);
            }
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
            
            // Save the selection
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].selected = selectedOptions;
            answers[currentSection][currentQuestion].submitted = false;
            
            document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.toggle('show', selectedOptions.length > 0);
        }

        function highlightSelectedOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                
                if (i === index) {
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        if (questionData.correct !== undefined) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                }
            });
        }

        function highlightSelectedOptionsForMultipleResponse() {
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
        }

        function submitAnswer() {
            if (selectedOptions.length === 0) return;
            
            isSubmitted = true;
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].submitted = true;
            
            const questionData = getCurrentQuestionData();
            showFeedbackForMultipleResponse(questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('cancelBtn').classList.remove('show');
        }

        function showFeedback(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            if (index === questionData.correct) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Correct! Well done.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                const correctLetter = String.fromCharCode(65 + questionData.correct);
                feedbackText.textContent = `Incorrect. Correct: ${correctLetter}`;
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function showFeedbackForMultipleResponse(questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            const allCorrectSelected = questionData.correct.every(c => selectedOptions.includes(c));
            const noIncorrectSelected = selectedOptions.every(s => questionData.correct.includes(s));
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (questionData.correct.includes(i)) {
                    option.classList.add('correct');
                }
                if (selectedOptions.includes(i) && !questionData.correct.includes(i)) {
                    option.classList.add('incorrect');
                }
            });
            
            if (allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Perfect! All correct selected.';
            } else if (allCorrectSelected && !noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Almost! All correct + some incorrect.';
            } else if (!allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Partially correct! Some correct, missed others.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                feedbackText.textContent = 'Incorrect. Missed correct & selected incorrect.';
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function cancelSelection() {
            const questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                selectedOptions = [];
                isSubmitted = false;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                if (answers[currentSection][currentQuestion]) {
                    answers[currentSection][currentQuestion] = {selected: [], submitted: false};
                }
                
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('cancelBtn').classList.remove('show');
            } else {
                // For single answer questions
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            }
        }

        function nextCard() {
            const totalQuestions = getTotalQuestions();
            
            if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                loadQuestion();
            } else {
                let correctCount = 0;
                let totalAnswered = 0;
                
                Object.keys(answers).forEach(section => {
                    answers[section].forEach((answer, index) => {
                        if (answer !== null && answer !== undefined) {
                            totalAnswered++;
                            const questionData = getQuestionData(section, index);
                            
                            if (Array.isArray(questionData?.correct)) {
                                if (answer.submitted && Array.isArray(answer.selected)) {
                                    const allCorrect = questionData.correct.every(c => answer.selected.includes(c));
                                    const noIncorrect = answer.selected.every(s => questionData.correct.includes(s));
                                    if (allCorrect && noIncorrect) correctCount++;
                                }
                            } else {
                                if (answer === questionData?.correct) correctCount++;
                            }
                        }
                    });
                });
                
                alert(`Quiz completed!\n\nAnswered: ${totalAnswered}\nCorrect: ${correctCount}\n\nClick OK to restart.`);
                
                currentSection = 'multiple-choice';
                currentQuestion = 0;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                answers = {
                    'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
                    'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
                    'all': Array(sections['all'].length).fill(null)
                };
                
                setSection('multiple-choice');
            }
        }

        function previousCard() {
            if (currentQuestion > 0) {
                currentQuestion--;
                const storedAnswer = answers[currentSection][currentQuestion];
                
                if (isMultipleResponseQuestion()) {
                    selectedOptions = storedAnswer?.selected || [];
                    isSubmitted = storedAnswer?.submitted || false;
                } else {
                    selectedOption = storedAnswer;
                }
                
                loadQuestion();
            }
        }

        function getTotalQuestions() {
            if (currentSection === 'all') {
                return sections['all'].length;
            } else {
                return sections[currentSection].length;
            }
        }

        function getQuestionData(section, index) {
            if (section === 'all') {
                return sections['all'][index];
            } else {
                return sections[section][index];
            }
        }

        // Initialize
        setSection('multiple-choice');
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '5') {
                const index = parseInt(event.key) - 1;
                const questionData = getCurrentQuestionData();
                selectOption(index, questionData);
            } else if (event.key >= 'a' && event.key <= 'e') {
                const index = event.key.charCodeAt(0) - 97;
                const questionData = getCurrentQuestionData();
                selectOption(index, questionData);
            } else if (event.key === 'Enter' && isMultipleResponseQuestion()) {
                if (selectedOptions.length > 0 && !isSubmitted) {
                    submitAnswer();
                }
            } else if (event.key === 'ArrowLeft') {
                if (!document.getElementById('prevBtn').disabled) {
                    previousCard();
                }
            } else if (event.key === 'ArrowRight') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (event.key === ' ' || event.key === 'Spacebar') {
                if (!document.getElementById('nextBtn').disabled && !isMultipleResponseQuestion()) {
                    nextCard();
                }
            } else if (event.key === 'Escape') {
                cancelSelection();
            }
        });
    </script>
</body>
</html>